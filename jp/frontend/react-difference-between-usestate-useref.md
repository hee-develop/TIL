# React useState / useRef hooksの違い

`Written: 2021-08-03`

関数コンポーネントはレンダリングする度に関数の処理を実行する。なので、基本的に関数の中に値を保存することはできず、代わりに`hooks`を用いる必要がある。
デフォルトのhooksはいろんなものがあるが、データを保存するものは`useState`と`useRef`くらいがある。Reactを使い始めたばかりの時は`useMemo`も値を保存するものだと思っていたけど、少し勉強してみるとVueの`computed`のようなものだったってことがわかったのでここでは書かない。

### useState
言葉通り**ステート**をもつ。使うときは`getter / setter`を指定し、値を変えるときに`setter`を呼ぶことで値を変えることができる。
**ステートが変わるとコンポーネントがそれを検知し、レンダリングする**。

### useRef
言葉通り**参照**をもつ。DOMを指すときに使う`ref`と名前が一緒で、実際それとして使えるがとりあえず違うものだ。
useRefは可変データを持っているためいつでも値を変えることができる。useStateは不変(stateは不変で、変えるときは`setter`を使う)なので直接値を変えてはいけない。
useRefの値はobjectで包まれているため、使う時は`.current`する必要がある。
一番大事なことで、**stateと違い、値が変わってもコンポーネントがレンダリングをしない**。

inputタグの値を`state`で設定すると**inputが変わるたびにコンポーネントがレンダリングされてしまう。** つまり、不要なレンダリングを繰り返すことで性能に問題が起きる可能性がある。`ref`で値を指定するとinputが変わってもコンポーネントをレンダリングしないため、不要な演算を減らすことができる。

### Reference
https://www.codebeast.dev/usestate-vs-useref-re-render-or-not/
